# ============================================
# HEALTHY ONE GRAM - ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and fill in actual values
# Never commit .env file - it contains secrets!

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=8080
NODE_ENV=development
# Optional (development): if true, server will auto-try the next port when PORT is busy.
# Keep this false/empty unless you explicitly want dynamic port fallback.
# ALLOW_PORT_FALLBACK=false

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Get this from: https://www.mongodb.com/cloud/atlas
# Format: mongodb+srv://username:password@cluster.mongodb.net/database_name
MONGO_URI=mongodb+srv://your_username:your_password@cluster0.xxxxx.mongodb.net/BuyOneGram?appName=Cluster0

# ============================================
# AUTHENTICATION (JWT)
# ============================================
# Generate random 32+ character strings for each
# Option: Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ACCESS_TOKEN_SECRET=your_access_token_secret_min_32_chars_long
REFRESH_TOKEN_SECRET=your_refresh_token_secret_min_32_chars_long
# Optional legacy keys (for migration only):
# SECRET_KEY_ACCESS_TOKEN=your_access_token_secret_min_32_chars_long
# SECRET_KEY_REFRESH_TOKEN=your_refresh_token_secret_min_32_chars_long
# JSON_WEB_TOKEN_SECRET_KEY=your_jwt_secret_min_32_chars_long
# JWT_SECRET=your_jwt_secret_min_32_chars_long

# ============================================
# EMAIL SERVICE (Gmail with App Password)
# ============================================
# 1. Enable 2FA on Gmail: https://myaccount.google.com/security
# 2. Generate App Password: https://myaccount.google.com/apppasswords
# 3. Copy the generated password here
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<set-in-github-secret>
SMTP_PASS=<set-in-github-secret>
EMAIL_FROM_NAME=HealthyOneGram
EMAIL_FROM_ADDRESS=<set-in-github-secret>
# Optional compatibility fallback (legacy keys still supported)
# EMAIL=<set-in-github-secret>
# EMAIL_PASSWORD=<set-in-github-secret>
# Optional retry tuning
# EMAIL_RETRY_COUNT=2
# EMAIL_RETRY_DELAY_MS=700

# ============================================
# CLOUDINARY (Image/File Storage)
# ============================================
# Sign up: https://cloudinary.com/console
# Get credentials from: https://cloudinary.com/console/settings/credentials
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key_number
CLOUDINARY_API_SECRET=your_api_secret_string

# ============================================
# PHONEPE PAYMENT GATEWAY (Onboarding in Progress)
# ============================================
# PhonePe Business Account: https://business.phonepe.com
# Integration Docs: https://developer.phonepe.com
# 
# STATUS: Onboarding in progress - set to 'false' until complete
# When PhonePe credentials are received, add them here
PHONEPE_ENABLED=false

# PhonePe Merchant Credentials (to be filled when onboarding is complete)
# PHONEPE_MERCHANT_ID=your_merchant_id
# PHONEPE_SALT_KEY=your_salt_key
# PHONEPE_SALT_INDEX=1
# PHONEPE_ENV=UAT  # or PROD for production
# PHONEPE_REDIRECT_URL=https://client-dot-healthy-one-gram.el.r.appspot.com/payment/phonepe
# PHONEPE_CALLBACK_URL=https://healthy-one-gram.el.r.appspot.com/api/orders/webhook/phonepe
# Optional overrides for order checkout
# PHONEPE_ORDER_REDIRECT_URL=https://client-dot-healthy-one-gram.el.r.appspot.com/payment/phonepe
# PHONEPE_ORDER_CALLBACK_URL=https://healthy-one-gram.el.r.appspot.com/api/orders/webhook/phonepe
# Optional overrides for membership checkout
# PHONEPE_MEMBERSHIP_REDIRECT_URL=https://client-dot-healthy-one-gram.el.r.appspot.com/membership/checkout
# PHONEPE_MEMBERSHIP_CALLBACK_URL=https://healthy-one-gram.el.r.appspot.com/api/membership/verify-payment
# PHONEPE_BASE_URL=https://api-preprod.phonepe.com/apis/pg-sandbox
# PHONEPE_PAY_PATH=/pg/v1/pay
# PHONEPE_STATUS_PATH=/pg/v1/status

# Backend public URL (used for callbacks)
# BACKEND_URL=https://healthy-one-gram.el.r.appspot.com

# ============================================
# XPRESSBEES SHIPPING
# ============================================
# Option 1: Static token (recommended)
# XPRESSBEES_TOKEN=your_xpressbees_bearer_token
#
# Option 2: Login with email/password (token cached server-side)
# XPRESSBEES_EMAIL=your_login_email
# XPRESSBEES_PASSWORD=your_login_password
#
# Optional overrides
# XPRESSBEES_BASE_URL=https://shipment.xpressbees.com/api
# XPRESSBEES_TOKEN_TTL_MINUTES=720
# XPRESSBEES_PICKUP_WAREHOUSE_NAME=BuyOneGram Sitapura Office
# XPRESSBEES_PICKUP_CONTACT_NAME=BuyOneGram Office
# XPRESSBEES_PICKUP_ADDRESS_LINE1=G-225, RIICO INDUSTRIAL AREA SITAPURA
# XPRESSBEES_PICKUP_ADDRESS_LINE2=TONK ROAD
# XPRESSBEES_PICKUP_CITY=Jaipur
# XPRESSBEES_PICKUP_STATE=Rajasthan
# XPRESSBEES_PICKUP_PINCODE=302022
# XPRESSBEES_PICKUP_PHONE=9461440030
# Webhook verification (optional but recommended)
# XPRESSBEES_WEBHOOK_SECRET=your_webhook_secret
# Polling fallback (used when webhook delivery is unavailable)
# XPRESSBEES_POLL_ENABLED=false
# XPRESSBEES_POLL_INTERVAL_MINUTES=15
# XPRESSBEES_POLL_BATCH_SIZE=25
# Origin pincode for rate quote requests
# SHIPPER_PINCODE=302019
# XPRESSBEES_ORIGIN_PINCODE=302019

# ============================================
# INVENTORY RESERVATION EXPIRY
# ============================================
# Auto-release unpaid reservations after TTL
# INVENTORY_RESERVATION_ENABLED=false
# INVENTORY_RESERVATION_MINUTES=30
# INVENTORY_RESERVATION_INTERVAL_MINUTES=5
# INVENTORY_RESERVATION_BATCH_SIZE=50

# ============================================
# INVOICE SETTINGS
# ============================================
# Seller/company details printed on invoice PDFs
# INVOICE_SELLER_NAME=HealthyOneGram
# INVOICE_SELLER_GSTIN=08XXXXXXXXXXXX
# INVOICE_SELLER_ADDRESS=G-225, RIICO INDUSTRIAL AREA SITAPURA, TONK ROAD, JAIPUR-302022
# INVOICE_SELLER_STATE=Rajasthan
# INVOICE_SELLER_STATE_CODE=08
# INVOICE_SELLER_PHONE=9461440030
# INVOICE_SELLER_EMAIL=buy1gram@gmail.com
# INVOICE_CURRENCY_SYMBOL=Rs.
# INVOICE_DEFAULT_HSN=2106
# INVOICE_DEFAULT_GST_RATE=5

# ============================================
# Frontend URLs (CORS Configuration)
# ============================================
CLIENT_URL=https://client-dot-healthy-one-gram.el.r.appspot.com
ADMIN_URL=https://admin-dot-healthy-one-gram.el.r.appspot.com
# Optional comma-separated list for additional trusted origins
# CORS_ORIGINS=https://healthyonegram.com,https://www.healthyonegram.com

# Optional cookie domain (production only)
# Example: COOKIE_DOMAIN=.healthyonegram.com
# COOKIE_DOMAIN=

# Backend public URL (used for payment/membership callback fallback)
# BACKEND_URL=https://healthy-one-gram.el.r.appspot.com

# ============================================
# OPTIONAL: Logging & Monitoring
# ============================================
# LOG_LEVEL=info
# SENTRY_DSN=https://xxxxxxx@xxxxxxx.ingest.sentry.io/123456
# STRIPE_KEY=sk_test_xxxxx  (if using Stripe instead)

# ============================================
# FIREBASE ADMIN SDK (Push Notifications)
# ============================================
# 1. Go to Firebase Console: https://console.firebase.google.com
# 2. Project Settings > Service Accounts
# 3. Generate new private key
# 4. Copy values from the downloaded JSON
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour_Private_Key_Here\n-----END PRIVATE KEY-----\n"

# ============================================
# INFLUENCER PORTAL AUTH (Collaborator Login)
# ============================================
# Used to sign collaborator portal tokens
# If omitted, ACCESS_TOKEN_SECRET (or legacy JWT keys) is used as fallback
INFLUENCER_JWT_SECRET=your_influencer_jwt_secret
# Used to sign refresh tokens (optional)
# If omitted, INFLUENCER_JWT_SECRET or REFRESH_TOKEN_SECRET is used as fallback
INFLUENCER_REFRESH_TOKEN_SECRET=your_influencer_refresh_secret

# ============================================
# NOTES
# ============================================
# 1. Never commit .env - add it to .gitignore
# 2. In production, use strong random strings (32+ chars)
# 3. Rotate secrets regularly
# 4. Keep backups of working .env files
# 5. Use .env.example for documentation (no secrets)
# 6. Test all credentials after setting up
